@inherits LayoutComponentBase
@inject ISnackbar Snackbar

<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudStack Class="flex-grow-1 gap-0" Style="min-height:100vh;">

        <MudAppBar Elevation="1" Color="Color.Secondary">
            <MudIconButton aria-label="Toggle light/dark theme" Icon="@GetThemeIcon()" Color="MudBlazor.Color.Inherit" OnClick="DarkMode"/>
            <MudSpacer />
            <NavMenu></NavMenu>
        </MudAppBar>

        <MudMainContent>  
            <MudContainer MaxWidth="MaxWidth.Large">
                    @Body
            </MudContainer>
        </MudMainContent>

        <MudScrollToTop TopOffset="400" Style="z-index:2000;">
            <MudFab Icon="@Icons.Material.Filled.KeyboardArrowUp" Color="MudBlazor.Color.Primary"/>
        </MudScrollToTop>

        <MudSpacer/>

        <MudMainContent Class="flex-grow-0">
            <MudContainer Fixed="true">
                <ChildContent>
                    <Footer/>
                </ChildContent>
            </MudContainer>
        </MudMainContent>

    </MudStack>
</MudLayout>

@code{
    private MudTheme _theme = new();
    private bool _isDarkMode = true;

    private void DarkMode()
    {
        _isDarkMode = !_isDarkMode;
    }

    private string GetThemeIcon()
    {
        if (_isDarkMode)
        {
            return Icons.Material.Outlined.LightMode;
        }
        else
        {
            return Icons.Material.Outlined.DarkMode;
        }
    }
}

