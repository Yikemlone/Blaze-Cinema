@using Cinema.Shared.DTO
@inherits ComponentBase

@*This will display the layout of the room the screening is being displayed in.*@

@if(SeatScreenings != null) {
<MudPaper>
        @foreach (var seat in SeatScreenings)
        {
            <Seat OnSeatSelected="SeatSelected" SeatScreening="@seat"/>
        }
    </MudPaper>
}

@code {
    [Parameter] public List<SeatScreeningDTO> SeatScreenings { get; set; }
    [Parameter] public EventCallback<List<SeatScreeningDTO>> OnSeatsSelected { get; set; }

    private List<SeatScreeningDTO> _selectedSeats;

    protected async Task SeatSelected(SeatScreeningDTO seat)
    {
        // This will set the selected seat, unless its already in the list
        // which then it will remove it 
        if (_selectedSeats.Contains(seat))
        {
            _selectedSeats.Remove(seat);
        }
        else 
        {
            _selectedSeats.Add(seat);
        }
    }

    protected async Task OnSelected() 
    {
        // This will send all the selected seats page to booking page.
        await OnSeatsSelected.InvokeAsync(_selectedSeats);
    }

}
